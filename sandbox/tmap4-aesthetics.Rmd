---
title: "tmap4: aesthetics"
author: Jakub Nowosad
date: 2020-11-30
output: 
  html_document: 
    toc: yes
    number_sections: yes
    keep_md: yes
---

```{r, echo=FALSE, message=FALSE, warning=FALSE}
library(tibble)
library(glue)
library(dplyr)

aes_df = tribble(
  ~aes_name, ~layer,
  "fill", "tm_polygons()",
  "fill", "tm_symbols()",
  #"fill", "tm_raster()",
  #"fill", "tm_text()",
  "fill", "tm_fill()",
  "fill", "tm_bubbles()",
  #"fill", "tm_dots()",
  #?"fill", "tm_markers()",
  "fill", "tm_square()",
  #"fill", "tm_iso()",
  #"fill", "tm_rgb()/tm_rgba()",
  "color", "tm_polygons()",
  "color", "tm_symbols()",
  "color", "tm_lines()",
  "color", "tm_raster()",
  "color", "tm_text()",
  "color", "tm_borders()",
  "color", "tm_bubbles()",
  "color", "tm_dots()",
  "color", "tm_markers()",
  "color", "tm_square()",
  "color", "tm_iso()",
  "color", "tm_rgb()/tm_rgba()",
  "stroke", "tm_polygons()",
  "size", "tm_symbols()",
  "stroke", "tm_lines()",
  # "size", "tm_raster()",
  "size", "tm_text()",
  "stroke", "tm_borders()",
  "size", "tm_bubbles()",
  "size", "tm_dots()",
  "size", "tm_markers()",
  "size", "tm_square()",
  "size", "tm_iso()",
  "linetype", "tm_polygons()",
  "shape", "tm_symbols()",
  "linetype", "tm_lines()",
  # "shape", "tm_raster()",
  "shape", "tm_text()",
  "linetype", "tm_borders()",
  "shape", "tm_bubbles()",
  "shape", "tm_dots()",
  "shape", "tm_markers()",
  "shape", "tm_square()",
  "linetype", "tm_iso()",
  "stroke", "tm_symbols()",
  "stroke", "tm_bubbles()",
  "stroke", "tm_markers()",
  "stroke", "tm_square()",
  "text", "tm_text()",
  "text", "tm_iso()",
  "stroke", "tm_iso()"
)

what_aes = function(layer_name){
  aes = filter(aes_df, layer == layer_name)
  aes_txt = glue_collapse(aes$aes_name, sep = ", ")
  glue("{aes_txt}")
}
aes_df2 = tibble(layer = unique(aes_df$layer))
aes_df2$aes = purrr::map_chr(aes_df2$layer, what_aes)
```

# Layers and aesthetics list

```{r, echo=FALSE}
knitr::kable(aes_df2, caption = "Map layers and their aesthetics that use data variables")
```

# Questions/comments

1. Should I also list other aesthetics (e.g. alpha, colorNA, text family, text fontface, text angle)
2. Should we distinguish between data-based aesthetics (e.g., color or size) and single value aesthetics (e.g., colorNA, text family)?
3. What to do with alpha? 
Is it in the first or the second group?
4. `tm_raster()`/`tm_rgb()`/`tm_rgba()` - should it use `"color"` or `"fill"`?
5. `tm_dots()` - should it have aesthetics like `shape` and `color`?
6. I have tried to separate some meanings. 
For example, `tm_symbols()` - `"size"` relates to the symbol size, and `"stroke"` relates to the border/line width.
What do you think about it?
7. What to do with `tm_iso()`? `"color"` there could relate to the text color or line color... 
(It is the only corner case, I was able to find).
8. Also, maybe we can learn something useful from https://ggplot2-book.org/internals.html.
